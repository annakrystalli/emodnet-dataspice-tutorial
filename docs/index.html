<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>EMODnet Dataspice Tutorial: EMODnet Biology Dataspice Tutorial</title>

  <meta property="description" itemprop="description" content="An Introduction to using R package Dataspice to collect metadata for EMODnet Biology Data Products"/>

  <link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"/>
  <link rel="icon" type="image/png" href="images/favicon.png"/>

  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2022-02-28"/>
  <meta property="article:created" itemprop="dateCreated" content="2022-02-28"/>
  <meta name="article:author" content="Anna Krystalli, Ph.D."/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="EMODnet Dataspice Tutorial: EMODnet Biology Dataspice Tutorial"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="An Introduction to using R package Dataspice to collect metadata for EMODnet Biology Data Products"/>
  <meta property="og:locale" content="en_US"/>
  <meta property="og:site_name" content="EMODnet Dataspice Tutorial"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="EMODnet Dataspice Tutorial: EMODnet Biology Dataspice Tutorial"/>
  <meta property="twitter:description" content="An Introduction to using R package Dataspice to collect metadata for EMODnet Biology Data Products"/>
  <meta property="twitter:site" content="@annakrystalli"/>

  <!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","author","date","description","site"]}},"value":[{"type":"character","attributes":{},"value":["EMODnet Biology Dataspice Tutorial"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url","affiliation","affiliation_url"]}},"value":[{"type":"character","attributes":{},"value":["Anna Krystalli, Ph.D."]},{"type":"character","attributes":{},"value":["https://annakrystalli.me"]},{"type":"character","attributes":{},"value":["University of Sheffield, <br> Research Software Engineering"]},{"type":"character","attributes":{},"value":["https://rse.shef.ac.uk/"]}]}]},{"type":"character","attributes":{},"value":["2022-02-28"]},{"type":"character","attributes":{},"value":["An Introduction to using R package Dataspice to collect metadata for EMODnet Biology Data Products\n"]},{"type":"character","attributes":{},"value":["distill::distill_website"]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  <!--radix_placeholder_navigation_in_header-->
  <meta name="distill:offset" content=""/>

  <script type="application/javascript">

    window.headroom_prevent_pin = false;

    window.document.addEventListener("DOMContentLoaded", function (event) {

      // initialize headroom for banner
      var header = $('header').get(0);
      var headerHeight = header.offsetHeight;
      var headroom = new Headroom(header, {
        tolerance: 5,
        onPin : function() {
          if (window.headroom_prevent_pin) {
            window.headroom_prevent_pin = false;
            headroom.unpin();
          }
        }
      });
      headroom.init();
      if(window.location.hash)
        headroom.unpin();
      $(header).addClass('headroom--transition');

      // offset scroll location for banner on hash change
      // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
      window.addEventListener("hashchange", function(event) {
        window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
      });

      // responsive menu
      $('.distill-site-header').each(function(i, val) {
        var topnav = $(this);
        var toggle = topnav.find('.nav-toggle');
        toggle.on('click', function() {
          topnav.toggleClass('responsive');
        });
      });

      // nav dropdowns
      $('.nav-dropbtn').click(function(e) {
        $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
        $(this).parent().siblings('.nav-dropdown')
           .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $("body").click(function(e){
        $('.nav-dropdown-content').removeClass('nav-dropdown-active');
      });
      $(".nav-dropdown").click(function(e){
        e.stopPropagation();
      });
    });
  </script>

  <style type="text/css">

  /* Theme (user-documented overrideables for nav appearance) */

  .distill-site-nav {
    color: rgba(255, 255, 255, 0.8);
    background-color: #0F2E3D;
    font-size: 15px;
    font-weight: 300;
  }

  .distill-site-nav a {
    color: inherit;
    text-decoration: none;
  }

  .distill-site-nav a:hover {
    color: white;
  }

  @media print {
    .distill-site-nav {
      display: none;
    }
  }

  .distill-site-header {

  }

  .distill-site-footer {

  }


  /* Site Header */

  .distill-site-header {
    width: 100%;
    box-sizing: border-box;
    z-index: 3;
  }

  .distill-site-header .nav-left {
    display: inline-block;
    margin-left: 8px;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header .nav-left {
      margin-left: 0;
    }
  }


  .distill-site-header .nav-right {
    float: right;
    margin-right: 8px;
  }

  .distill-site-header a,
  .distill-site-header .title {
    display: inline-block;
    text-align: center;
    padding: 14px 10px 14px 10px;
  }

  .distill-site-header .title {
    font-size: 18px;
    min-width: 150px;
  }

  .distill-site-header .logo {
    padding: 0;
  }

  .distill-site-header .logo img {
    display: none;
    max-height: 20px;
    width: auto;
    margin-bottom: -4px;
  }

  .distill-site-header .nav-image img {
    max-height: 18px;
    width: auto;
    display: inline-block;
    margin-bottom: -3px;
  }



  @media screen and (min-width: 1000px) {
    .distill-site-header .logo img {
      display: inline-block;
    }
    .distill-site-header .nav-left {
      margin-left: 20px;
    }
    .distill-site-header .nav-right {
      margin-right: 20px;
    }
    .distill-site-header .title {
      padding-left: 12px;
    }
  }


  .distill-site-header .nav-toggle {
    display: none;
  }

  .nav-dropdown {
    display: inline-block;
    position: relative;
  }

  .nav-dropdown .nav-dropbtn {
    border: none;
    outline: none;
    color: rgba(255, 255, 255, 0.8);
    padding: 16px 10px;
    background-color: transparent;
    font-family: inherit;
    font-size: inherit;
    font-weight: inherit;
    margin: 0;
    margin-top: 1px;
    z-index: 2;
  }

  .nav-dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 200px;
    border: 1px solid rgba(0,0,0,0.15);
    border-radius: 4px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
    z-index: 1;
    margin-top: 2px;
    white-space: nowrap;
    padding-top: 4px;
    padding-bottom: 4px;
  }

  .nav-dropdown-content hr {
    margin-top: 4px;
    margin-bottom: 4px;
    border: none;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .nav-dropdown-active {
    display: block;
  }

  .nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
    color: black;
    padding: 6px 24px;
    text-decoration: none;
    display: block;
    text-align: left;
  }

  .nav-dropdown-content .nav-dropdown-header {
    display: block;
    padding: 5px 24px;
    padding-bottom: 0;
    text-transform: uppercase;
    font-size: 14px;
    color: #999999;
    white-space: nowrap;
  }

  .nav-dropdown:hover .nav-dropbtn {
    color: white;
  }

  .nav-dropdown-content a:hover {
    background-color: #ddd;
    color: black;
  }

  .nav-right .nav-dropdown-content {
    margin-left: -45%;
    right: 0;
  }

  @media screen and (max-width: 768px) {
    .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
    .distill-site-header a.nav-toggle {
      float: right;
      display: block;
    }
    .distill-site-header .title {
      margin-left: 0;
    }
    .distill-site-header .nav-right {
      margin-right: 0;
    }
    .distill-site-header {
      overflow: hidden;
    }
    .nav-right .nav-dropdown-content {
      margin-left: 0;
    }
  }


  @media screen and (max-width: 768px) {
    .distill-site-header.responsive {position: relative; min-height: 500px; }
    .distill-site-header.responsive a.nav-toggle {
      position: absolute;
      right: 0;
      top: 0;
    }
    .distill-site-header.responsive a,
    .distill-site-header.responsive .nav-dropdown {
      display: block;
      text-align: left;
    }
    .distill-site-header.responsive .nav-left,
    .distill-site-header.responsive .nav-right {
      width: 100%;
    }
    .distill-site-header.responsive .nav-dropdown {float: none;}
    .distill-site-header.responsive .nav-dropdown-content {position: relative;}
    .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
      display: block;
      width: 100%;
      text-align: left;
    }
  }

  /* Site Footer */

  .distill-site-footer {
    width: 100%;
    overflow: hidden;
    box-sizing: border-box;
    z-index: 3;
    margin-top: 30px;
    padding-top: 30px;
    padding-bottom: 30px;
    text-align: center;
  }

  /* Headroom */

  d-title {
    padding-top: 6rem;
  }

  @media print {
    d-title {
      padding-top: 4rem;
    }
  }

  .headroom {
    z-index: 1000;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
  }

  .headroom--transition {
    transition: all .4s ease-in-out;
  }

  .headroom--unpinned {
    top: -100px;
  }

  .headroom--pinned {
    top: 0;
  }

  /* adjust viewport for navbar height */
  /* helps vertically center bootstrap (non-distill) content */
  .min-vh-100 {
    min-height: calc(100vh - 100px) !important;
  }

  </style>

  <script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
  <link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
  <script src="site_libs/headroom-0.9.4/headroom.min.js"></script>
  <script src="site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
  <script src="site_libs/fuse-6.4.1/fuse.min.js"></script>

  <script type="application/javascript">

  function getMeta(metaName) {
    var metas = document.getElementsByTagName('meta');
    for (let i = 0; i < metas.length; i++) {
      if (metas[i].getAttribute('name') === metaName) {
        return metas[i].getAttribute('content');
      }
    }
    return '';
  }

  function offsetURL(url) {
    var offset = getMeta('distill:offset');
    return offset ? offset + '/' + url : url;
  }

  function createFuseIndex() {

    // create fuse index
    var options = {
      keys: [
        { name: 'title', weight: 20 },
        { name: 'categories', weight: 15 },
        { name: 'description', weight: 10 },
        { name: 'contents', weight: 5 },
      ],
      ignoreLocation: true,
      threshold: 0
    };
    var fuse = new window.Fuse([], options);

    // fetch the main search.json
    return fetch(offsetURL('search.json'))
      .then(function(response) {
        if (response.status == 200) {
          return response.json().then(function(json) {
            // index main articles
            json.articles.forEach(function(article) {
              fuse.add(article);
            });
            // download collections and index their articles
            return Promise.all(json.collections.map(function(collection) {
              return fetch(offsetURL(collection)).then(function(response) {
                if (response.status === 200) {
                  return response.json().then(function(articles) {
                    articles.forEach(function(article) {
                      fuse.add(article);
                    });
                  })
                } else {
                  return Promise.reject(
                    new Error('Unexpected status from search index request: ' +
                              response.status)
                  );
                }
              });
            })).then(function() {
              return fuse;
            });
          });

        } else {
          return Promise.reject(
            new Error('Unexpected status from search index request: ' +
                        response.status)
          );
        }
      });
  }

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // get search element (bail if we don't have one)
    var searchEl = window.document.getElementById('distill-search');
    if (!searchEl)
      return;

    createFuseIndex()
      .then(function(fuse) {

        // make search box visible
        searchEl.classList.remove('hidden');

        // initialize autocomplete
        var options = {
          autoselect: true,
          hint: false,
          minLength: 2,
        };
        window.autocomplete(searchEl, options, [{
          source: function(query, callback) {
            const searchOptions = {
              isCaseSensitive: false,
              shouldSort: true,
              minMatchCharLength: 2,
              limit: 10,
            };
            var results = fuse.search(query, searchOptions);
            callback(results
              .map(function(result) { return result.item; })
            );
          },
          templates: {
            suggestion: function(suggestion) {
              var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
                ? `<img src="${offsetURL(suggestion.preview)}"</img>`
                : '';
              var html = `
                <div class="search-item">
                  <h3>${suggestion.title}</h3>
                  <div class="search-item-description">
                    ${suggestion.description || ''}
                  </div>
                  <div class="search-item-preview">
                    ${img}
                  </div>
                </div>
              `;
              return html;
            }
          }
        }]).on('autocomplete:selected', function(event, suggestion) {
          window.location.href = offsetURL(suggestion.path);
        });
        // remove inline display style on autocompleter (we want to
        // manage responsive display via css)
        $('.algolia-autocomplete').css("display", "");
      })
      .catch(function(error) {
        console.log(error);
      });

  });

  </script>

  <style type="text/css">

  .nav-search {
    font-size: x-small;
  }

  /* Algolioa Autocomplete */

  .algolia-autocomplete {
    display: inline-block;
    margin-left: 10px;
    vertical-align: sub;
    background-color: white;
    color: black;
    padding: 6px;
    padding-top: 8px;
    padding-bottom: 0;
    border-radius: 6px;
    border: 1px #0F2E3D solid;
    width: 180px;
  }


  @media screen and (max-width: 768px) {
    .distill-site-nav .algolia-autocomplete {
      display: none;
      visibility: hidden;
    }
    .distill-site-nav.responsive .algolia-autocomplete {
      display: inline-block;
      visibility: visible;
    }
    .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
      margin-left: 0;
      width: 400px;
      max-height: 400px;
    }
  }

  .algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
    width: 90%;
    outline: none;
    border: none;
  }

  .algolia-autocomplete .aa-hint {
    color: #999;
  }
  .algolia-autocomplete .aa-dropdown-menu {
    width: 550px;
    max-height: 70vh;
    overflow-x: visible;
    overflow-y: scroll;
    padding: 5px;
    margin-top: 3px;
    margin-left: -150px;
    background-color: #fff;
    border-radius: 5px;
    border: 1px solid #999;
    border-top: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
    cursor: pointer;
    padding: 5px 4px;
    border-bottom: 1px solid #eee;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
    border-bottom: none;
    margin-bottom: 2px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
    overflow: hidden;
    font-size: 0.8em;
    line-height: 1.4em;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
    font-size: 1rem;
    margin-block-start: 0;
    margin-block-end: 5px;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
    display: inline-block;
    overflow: hidden;
    height: 2.8em;
    width: 80%;
    margin-right: 4%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
    display: inline-block;
    width: 15%;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
    height: 3em;
    width: auto;
    display: none;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
    display: initial;
  }

  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
    background-color: #eee;
  }
  .algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
    font-weight: bold;
    font-style: normal;
  }

  </style>


  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure img {
    width: 100%;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          return "<p>" + $('#ref-' + ref).html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
  <meta name="description" content="EMODnet Biology Dataspice Tutorial"/>
  <meta name="generator" content="xaringan and remark.js"/>
  <meta name="github-repo" content="annakrystalli/emodnet-dataspice-tutorial"/>
  <meta name="twitter:title" content="EMODnet Biology Dataspice Tutorial"/>
  <meta name="twitter:description" content="EMODnet Biology Dataspice Tutorial"/>
  <meta name="twitter:url" content="http://annakrystalli.me/emodnet-dataspice-tutorial/"/>
  <meta name="twitter:image" content="https://github.com/annakrystalli/emodnet-dataspice-tutorial/blob/master/images/EMODnet_coll_all.jpeg?raw=true"/>
  <meta name="twitter:image:alt" content="EMODnet logo"/>
  <meta name="twitter:card" content="summary_large_image"/>
  <meta property="og:title" content="EMODnet Biology Dataspice Tutorial"/>
  <meta property="og:description" content="EMODnet Biology Dataspice Tutorial"/>
  <meta property="og:url" content="http://annakrystalli.me/emodnet-dataspice-tutorial/"/>
  <meta property="og:image" content="https://github.com/annakrystalli/emodnet-dataspice-tutorial/blob/master/images/EMODnet_coll_all.jpeg?raw=true"/>
  <meta property="og:image:alt" content="EMODnet logo"/>
  <meta property="og:type" content="website"/>
  <meta property="og:locale" content="en_US"/>
  <script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
  <link href="site_libs/jsoneditor-5.25.6/jsoneditor.min.css" rel="stylesheet" />
  <script src="site_libs/jsoneditor-5.25.6/jsoneditor.min.js"></script>
  <script src="site_libs/jsonedit-binding-3.0.0/jsonedit.js"></script>
  <script src="site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <style type="text/css">
  d-title {
    padding-top: 13rem; /*so that navbar doesn't overlap fixed title */
  }

  /* --------------Navbar-------------------- */


  /* background-image for fade-to-white color of navbar */
  .distill-site-header{ 
    padding: 40px 0px;
    background-image: linear-gradient(to bottom, rgba(255, 255, 255, 1), rgba(255,255,255,0.5));   
    background-color: transparent;
    font-size: 15px;
    letter-spacing: 2px;
    text-transform: uppercase;
  }

  .distill-site-header .logo img{
    max-height: 40px; /* Makes logo bigger, default was 20px */
  }

  /* dropdown navbar color on mobile */

  @media screen and (max-width: 768px){
    .distill-site-header.responsive {
        background: rgba(255,255,255,0.99);
    }
  }


  /* Navbar Links with Animated Hover */ 


  .distill-site-header a { /* A normal link in navbar */
    color: #1f1f1f;
    display: inline-block; /* This line and line below is so pseudo-element will work later */
    position: relative; 
    text-decoration: none;
    padding-left: 0px; /* overrides default so animation looks Ok */
    padding-right: 0px; /* overrides default so animation looks Ok */
    margin: 10px 14px; /* replaces default padding values for margin values */
  }


  .distill-site-header a:hover { /* (unanimated) hover behavior for navbar links */
    color: #787878;
    padding-left: 0px; /* overrides default so animation looks Ok */
    padding-right: 0px; /* overrides default so animation looks Ok */
    margin: 10px 14px; /* replaces default padding values for margin values */
  }

  .distill-site-header a:before { /*Creates pseudoelement line under link */
    background-color: #787878;
    content: '';
    height: 1px; 
    position: absolute;
    bottom: -1px;
    transition: width 0.3s ease-in-out; /* animate the width */
    width: 100%;
  }

  .distill-site-header a:hover:before {
    width: 0; /* Shrinks width of pseudoelement to 0 when hovered */
  }

  /* Makes sure animation does NOT apply to Title or Logo links (or toggle on mobile) */

  .distill-site-header a.title:before, .distill-site-nav a.logo:before, a.nav-toggle:before {
    display: none;
  }

  .distill-site-header a.title, .distill-site-nav a.logo {
    padding: 10px 0px;
    margin: 10px 14px;
  }


  /* No navbar links on mobile except title and nav-toggle */

  @media screen and (max-width: 768px) {
    .distill-site-header a, .distill-site-header .nav-dropdown {
      display: none;
    }
    
    .distill-site-header a.title, .distill-site-header a.nav-toggle {
      display: inline-block;
      padding: 10px 0px;
      margin: 10px 14px; 
    }
  }


  .box-shadow {
    border: 1px solid;
    padding: 10px;
    box-shadow: 5px 10px #888888;
  }

  </style>
  <!--/radix_placeholder_site_in_header-->

  <link rel="stylesheet" href="styles.css" type="text/css"/>

</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"EMODnet Biology Dataspice Tutorial","description":"An Introduction to using R package Dataspice to collect metadata for EMODnet Biology Data Products","authors":[{"author":"Anna Krystalli, Ph.D.","authorURL":"https://annakrystalli.me","affiliation":"University of Sheffield, <br> Research Software Engineering","affiliationURL":"https://rse.shef.ac.uk/","orcidID":""}],"publishedDate":"2022-02-28T00:00:00.000+00:00","citationText":"Ph.D., 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a class="logo" href="https://emodnet.ec.europa.eu/en">
<img src="images/logo.png" alt="Logo"/>
</a>
<a href="index.html" class="title">EMODnet Dataspice Tutorial</a>
</div>
<div class="nav-right">
<a href="index.html">Home</a>
<a href="about.html">About</a>
<a href="https://github.com/annakrystalli/emodnet-dataspice-tutorial">
<i class="fab fa-github" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>EMODnet Biology Dataspice Tutorial</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>An Introduction to using R package Dataspice to collect metadata for EMODnet Biology Data Products</p></p>
</div>

<div class="d-byline">
  Anna Krystalli, Ph.D. <a href="https://annakrystalli.me" class="uri">https://annakrystalli.me</a> (University of Sheffield, <br> Research Software Engineering)<a href="https://rse.shef.ac.uk/" class="uri">https://rse.shef.ac.uk/</a>
  
<br/>2022-02-28
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#preliminaries">Preliminaries</a>
<ul>
<li><a href="#software-requirements">Software Requirements</a></li>
<li><a href="#tutorial-materials">Tutorial Materials</a></li>
</ul></li>
<li><a href="#introduction">Introduction</a>
<ul>
<li><a href="#dataspice-workflow"><code>dataspice</code> workflow</a></li>
<li><a href="#example-materials">Example materials</a></li>
</ul></li>
<li><a href="#create-dataspice-metadata-files">Create dataspice metadata files</a></li>
<li><a href="#record-metadata">Record metadata</a>
<ul>
<li><a href="#creators.csv"><code>creators.csv</code></a></li>
<li><a href="#access.csv"><code>access.csv</code></a></li>
<li><a href="#biblio.csv"><code>biblio.csv</code></a></li>
<li><a href="#attributes.csv"><code>attributes.csv</code></a></li>
</ul></li>
<li><a href="#create-metadata-json-ld-file">Create metadata json-ld file</a>
<ul>
<li><a href="#benthic-occurrences-habitat-maps-and-species-traits">Benthic occurrences, habitat maps, and species traits</a></li>
</ul></li>
<li><a href="#build-readme-site">Build README site</a>
<ul>
<li><a href="#enable-github-pages-to-serve-the-metadata-webpage">Enable GitHub Pages to serve the metadata webpage</a></li>
<li><a href="#view-the-resulting-served-index.html-file-online">View the resulting served <code>index.html</code> file <span>online</span></a></li>
<li><a href="#completed-metadata-files">Completed metadata files</a></li>
</ul></li>
</ul>
</nav>
</div>
<div class="layout-chunk" data-layout="l-body">

</div>
<h2 id="overview">Overview</h2>
<p>The goal of this tutorial is to provide a <strong>practical exercise in creating metadata</strong> for an <strong>example field collected data product</strong> using package <a href="https://docs.ropensci.org/dataspice/"><code>dataspice</code></a>.</p>
<ul>
<li><p>Understand basic metadata and why it is important.</p></li>
<li><p>Understand where and how to store them.</p></li>
<li><p>Understand how they can feed into more complex metadata objects.</p></li>
</ul>
<h2 id="preliminaries">Preliminaries</h2>
<h3 id="software-requirements">Software Requirements</h3>
<p>To follow this tutorial, you will need to have <a href="https://cran.r-project.org/"><strong>a recent version of R</strong></a> and ideally <a href="https://www.rstudio.com/download"><strong>RStudio Desktop</strong></a> installed.</p>
<p>You will also need to install package <code>dataspice</code> as well as a few additional helper packages.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">&quot;dataspice&quot;</span>, <span class="st">&quot;here&quot;</span>, <span class="st">&quot;jsonlite&quot;</span>, <span class="st">&quot;listviewer&quot;</span>))</span></code></pre></div>
</div>
<h3 id="tutorial-materials">Tutorial Materials</h3>
<p>You will also need to fork (make a copy of) and clone (download your fork) the example Data Product <a href="https://github.com/EMODnet/EMODnet-Biology-Benthic-Habitats-Occurrences-Traits"><strong>EMODnet/EMODnet-Biology-Benthic-Habitats-Occurrences-Traits</strong></a> I will be working with in this tutorial.</p>
<h2 id="introduction">Introduction</h2>
<h3 id="dataspice-workflow"><code>dataspice</code> workflow</h3>
<div class="layout-chunk" data-layout="l-body">
<p><img src="https://github.com/ropensci/dataspice/raw/main/man/figures/dataspice_workflow.png" width="100%" /></p>
</div>
<h3 id="example-materials">Example materials</h3>
<p>The example Data Product Im working with is <a href="https://github.com/EMODnet/EMODnet-Biology-Benthic-Habitats-Occurrences-Traits"><strong>EMODnet/EMODnet-Biology-Benthic-Habitats-Occurrences-Traits</strong></a> and has the following structure:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a> EMODnet_occs_habs.Rproj</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a> README.html</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a> README.md</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a> analysis</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    benthic data habitat matching.Rmd</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    benthic species habitat dashboards.Rmd</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    species and traits.Rmd</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a> data</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    derived_data</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    raw_data</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a> docs</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    benthic<span class="sc">-</span>data<span class="sc">-</span>habitat<span class="sc">-</span>matching.html</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    benthic<span class="sc">-</span>data<span class="sc">-</span>habitat<span class="sc">-</span>matching.pdf</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    benthic<span class="sc">-</span>species<span class="sc">-</span>habitat<span class="sc">-</span>dashboards.html</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    benthic<span class="sc">-</span>species<span class="sc">-</span>habitat<span class="sc">-</span>dashboards.pdf</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    species<span class="sc">-</span>and<span class="sc">-</span>traits.html</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    species<span class="sc">-</span>and<span class="sc">-</span>traits.pdf</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a> product</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    benthic_sampling_event_habitat_summaries.csv</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    benthic_specicies_habitat_summaries.csv</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    species_hab_plots</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a> scripts</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>     biotic traits data.R</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>     get_event_habitats.R</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>     get_species_habitats.R</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>     get_worms_fgrp.R</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>     plot_species_habitats.R</span></code></pre></div>
<p>Generally, it is not necessary to document raw or intermediate data files. It <strong>is important to document any outputs or analytical data produced</strong>.</p>
<p>We therefore focus on the contents of the <code>product/</code> directory.</p>
<p>In particular, we will document the following two files:</p>
<ul>
<li><strong><code>benthic_sampling_event_habitat_summaries.csv</code></strong></li>
<li><strong><code>benthic_specicies_habitat_summaries.csv</code></strong></li>
</ul>
<h2 id="create-dataspice-metadata-files">Create dataspice metadata files</h2>
<p>Well <strong>start by creating the basic metadata <code>.csv</code> files</strong> in which to collect metadata related to our example dataset using function <strong><code>dataspice::create_spice()</code></strong>.</p>
<p>The default behaviour of the function (called without providing a <code>dir</code> argument), would create a <code>metadata</code> directory in the <code>data</code> directory in the root of a project.</p>
<p>However, because I want to document the files in the <code>product</code> directory, I override the default write out location by providing a <code>dir</code> argument.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>dataspice<span class="sc">::</span><span class="fu">create_spice</span>(<span class="at">dir =</span> <span class="st">&quot;product&quot;</span>)</span></code></pre></div>
</div>
<p>This <strong>creates a <code>metadata</code> directory in the projects <code>product</code> directory</strong> containing <strong>4 <code>.csv</code> files</strong> in which to record metadata.</p>
<div class="layout-chunk" data-layout="l-body">
<pre><code>product
 benthic_sampling_event_habitat_summaries.csv
 benthic_specicies_habitat_summaries.csv
 metadata
    access.csv
    attributes.csv
    biblio.csv
    creators.csv
    dataspice.json
 species_hab_plots
     Aphia103228_habitat_plot.pdf
     Aphia141433_habitat_plot.pdf</code></pre>
</div>
<ul>
<li><strong>access.csv</strong>: record details about where your data can be accessed.</li>
<li><strong>attributes.csv</strong>: record details about the variables in your data.</li>
<li><strong>biblio.csv</strong>: record dataset level metadata like title, description, licence and spatial and temoral coverage.</li>
<li><strong>creators.csv</strong>: record creator details.</li>
</ul>
<h2 id="record-metadata">Record metadata</h2>
<h3 id="creators.csv"><code>creators.csv</code></h3>
<blockquote>
<p>The <code>creators.csv</code> contains details of the <strong>dataset creators</strong>.</p>
</blockquote>
<h4 id="fields-to-collect">Fields to collect:</h4>
<ul>
<li><strong>id:</strong> ORCID or another ID.</li>
<li><strong>name:</strong> The name of the creator.</li>
<li><strong>affilitation:</strong> Affiliation of the creator.</li>
<li><strong>email:</strong> Email of the creator.</li>
</ul>
<p>Lets start with a quick and easy file to complete, the <strong>creators</strong>. We can <strong>open and edit</strong> the file in an <strong>interactive shiny app</strong> using <strong><code>dataspice::edit_creators()</code></strong>.</p>
<p>The default behaviour of the function (called without providing a <code>metadata_dir</code> argument) will look for a <code>creators.csv</code> file in the <code>data/</code> directory. However, because we want to override this behaviour, we provide an explicit path for the metadata directory.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>metadata_dir <span class="ot">&lt;-</span> here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;product&quot;</span>, <span class="st">&quot;metadata&quot;</span>)</span></code></pre></div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>dataspice<span class="sc">::</span><span class="fu">edit_creators</span>(<span class="at">metadata_dir =</span> metadata_dir)</span></code></pre></div>
</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="images/edit_creators.png" width="100%" /></p>
</div>
<p>Once details are complete, remember to click on <strong>Save</strong> to save the changes to the <code>creators.csv</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="images/edit_creators_cmpl.png" width="100%" /></p>
</div>
<h3 id="access.csv"><code>access.csv</code></h3>
<blockquote>
<p>The <code>access.csv</code> contains details about <strong>where the data can be accessed</strong>.</p>
</blockquote>
<h4 id="fields-to-collect-1">Fields to collect:</h4>
<ul>
<li><strong>fileName:</strong> The filename of the input data file(s).</li>
<li><strong>name:</strong> A human readable name for the file.</li>
<li><strong>contentUrl:</strong> A url to where the data is hosted, if applicable.</li>
</ul>
<p>Before manually completing any details in the <code>access.csv</code>, we can use <code>dataspice</code>s dedicated function <strong><code>prep_access()</code> to extract relevant information</strong> from the data files themselves.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>dataspice<span class="sc">::</span><span class="fu">prep_access</span>(<span class="at">data_path =</span> <span class="st">&quot;product&quot;</span>, <span class="at">access_path =</span> <span class="st">&quot;product/metadata/access.csv&quot;</span>)</span></code></pre></div>
</div>
<pre><code>The following fileNames have been added to the access file: benthic_sampling_event_habitat_summaries.csv, benthic_specicies_habitat_summaries.csv</code></pre>
<p>Next, we can <strong>use function <code>edit_access()</code></strong> to view and edit the contents of <code>access.csv</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>dataspice<span class="sc">::</span><span class="fu">edit_access</span>(metadata_dir)</span></code></pre></div>
</div>
<p>Remember to click on <strong>Save</strong> when youre done editing.</p>
<p>Otherwise, as the files are just csvs, you can edit them in your favourite editor instead.</p>
<p><br></p>
<h3 id="biblio.csv"><code>biblio.csv</code></h3>
<blockquote>
<p>The <code>biblio.csv</code> contains dataset level metadata like <strong>title</strong>, <strong>description</strong>, <strong>licence</strong> and <strong>spatial</strong> and <strong>temporal coverage</strong>.</p>
</blockquote>
<h4 id="fields-to-collect-2">Fields to collect:</h4>
<h5 id="bibliographic-metadata">Bibliographic metadata</h5>
<ul>
<li><strong>title:</strong> Title of the dataset(s) described.</li>
<li><strong>description:</strong> Description of the dataset(s), e.g.the abstract.</li>
<li><strong>datePublished:</strong> The date published in ISO 8601 format(YYYY-MM-DD).</li>
<li><strong>citation:</strong> Citation to a related work, such as a reference publication.</li>
<li><strong>keywords:</strong> Keywords, separated by commas, associated with the dataset(s) described.</li>
<li><strong>license:</strong> License under which (meta)data are published. Should be CC-BY 4.0 according to EMODnet policy.</li>
<li><strong>funder:</strong> Name of funders associated with the work through which data where generated.</li>
</ul>
<h5 id="spatial-coverage-metadata">Spatial Coverage metadata</h5>
<ul>
<li><strong>geographicDescription:</strong> Description of the area of study, i.e., Crater Lake.</li>
<li><strong>northBoundCoord:</strong> Southern latitudinal boundary of the data coverage area. For example 37.42242.</li>
<li><strong>eastBoundCoord:</strong> Eastern longitudinal boundary of the data coverage area. For example -122.08585.</li>
<li><strong>southBoundCoord:</strong> Northern latitudinal boundary of the data coverage area.</li>
<li><strong>westBoundCoord:</strong> Western longitudinal boundary of the data coverage area.</li>
<li><strong>wktString:</strong> Well-known Text (WKT) formatted representation of geometry. see: <a href="https://ropensci.org/tutorials/wellknown_tutorial/">pkg <code>wellknown</code></a> for details.</li>
</ul>
<p><em>To provide a single point to describe the spatial aspect of the dataset, provide the same coordinates for east-west and north-south boundary definition.</em></p>
<h5 id="temporal-coverage-metadata">Temporal Coverage metadata</h5>
<ul>
<li><strong>startDate:</strong> The start date of the data temporal coverage in ISO 8601 format (YYYY-MM-DD).</li>
<li><strong>endDate:</strong> The end date of the data temporal coverage in ISO 8601 format (YYYY-MM-DD).</li>
</ul>
<p>Before we start filling this table in, we can use some base R functions to extract some of the information we require from the data itself. In particular we can <strong>use function <code>range()</code> to extract the temporal and spatial extents of our data from columns containing temporal and spatial data.</strong></p>
<p>Such information is contained in <code>benthic_abundance_sampling_events_seabed_habs.csv</code> in the <code>data/derived_data</code> directory.</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<h4 id="get-temporal-extent">Get <strong>temporal extent</strong></h4>
<p>Although dates are stored as a text string, <strong>because they are in ISO format (YYYY-MM-DD), sorting them results in correct chronological ordering</strong>. If your temporal data is not in ISO format, consider converting them (see package <code>lubridate</code>)</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(sampling_events<span class="sc">$</span>datecollected, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span></code></pre></div>
<pre><code>[1] &quot;1980-03-17T00:00:00Z&quot; &quot;2018-07-04T00:00:00Z&quot;</code></pre>
</div>
<h4 id="get-geographical-extent">Get <strong>geographical extent</strong></h4>
<p>The lat/lon coordinates are in decimal degrees which again are easy to sort or calculate the range in each dimension.</p>
<h5 id="southnorth-boundaries">South/North boundaries</h5>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(sampling_events<span class="sc">$</span>decimallatitude)</span></code></pre></div>
<pre><code>[1] 43.34082 73.63362</code></pre>
</div>
<h5 id="westeast-boundaries">West/East boundaries</h5>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(sampling_events<span class="sc">$</span>decimallongitude)</span></code></pre></div>
<pre><code>[1] -9.39937 35.22617</code></pre>
</div>
<p><em>NB: you can also supply the geographic boundaries of your data as a single <a href="https://en.wikipedia.org/wiki/Well-known_text">well-known text string</a> in field <code>wktString</code> instead of supplying the four boundary coordinates.</em></p>
<p>Now that weve got the values for our temporal and spatial extents, we can <strong>complete the rest of the fields in the <code>biblio.csv</code> file using function <code>dataspice::edit_biblio()</code></strong>.</p>
<div class="alert alert-info">
<p>A lot of the rest of the information, Ive taken from the data product <a href="https://www.emodnet-biology.eu/data-catalog?module=dataset&amp;dasid=6620"><strong>metadata page on the data catalogue</strong></a>. Ideally, the workflow would work the other way around, i.e.the data is collected by the data product producer and is then much more easily ingested into the data catalogue.</p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>dataspice<span class="sc">::</span><span class="fu">edit_biblio</span>(metadata_dir)</span></code></pre></div>
</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="images/edit_biblio.png" width="100%" /></p>
</div>
<h3 id="attributes.csv"><code>attributes.csv</code></h3>
<blockquote>
<p>The <code>attributes.csv</code> contains details about the <strong>variables</strong> in your data. This is critical metadata to ensure data is understood and used correctly.</p>
</blockquote>
<h4 id="fields-to-collect-3">Fields to collect:</h4>
<ul>
<li><strong>fileName:</strong> The name of the data file(s) the variable is found in.</li>
<li><strong>variableName:</strong> The name of the measured variable.</li>
<li><strong>description:</strong> A written description of the variable measured.</li>
<li><strong>unitText:</strong> The units in which the variable was measured.</li>
</ul>
<p>Again, <code>dataspice</code> provides functionality to <strong>populate the <code>attributes.csv</code> by extracting the variable names from our data file</strong> using function <strong><code>dataspice::prep_attributes()</code></strong>.</p>
<p>The functions is vectorised and maps over each <code>.csv</code> file in our <code>product/</code> folder and populates the <code>fileName</code> and <code>variableName</code> columns.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>dataspice<span class="sc">::</span><span class="fu">prep_attributes</span>(<span class="at">data_path =</span> <span class="st">&quot;product&quot;</span>, </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">attributes_path =</span> <span class="fu">file.path</span>(metadata_dir, <span class="st">&quot;attributes.csv&quot;</span>))</span></code></pre></div>
</div>
<div class="layout-chunk" data-layout="l-body">
<p><img src="images/edit_attributes.png" width="100%" /></p>
</div>
<p>All column names in <strong><code>benthic_sampling_event_habitat_summaries.csv</code></strong> - <strong><code>benthic_specicies_habitat_summaries.csv</code></strong> have been successfully extracted into the <code>variableName</code> column of <code>attributes.csv</code>.</p>
<p>Now, we can complete the <code>description</code> and <code>unitText</code> fields using</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>dataspice<span class="sc">::</span><span class="fu">edit_attributes</span>(metadata_dir)</span></code></pre></div>
</div>
<p><strong><em>Note:</em></strong> <em>Because this is just a demo and I am not an expert in the data, the description is just a more readable version of each variable name and there are no units. This points to the importance of such metadata being produced by someone who is knowledgeable about the data, in order to ensure accuracy of descriptions.</em></p>
<h2 id="create-metadata-json-ld-file">Create metadata json-ld file</h2>
<p>Now that all our metadata files are complete, we can <strong>compile it all into a structured <code>dataspice.json</code> file</strong> in our <code>product/metadata/</code> folder.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>dataspice<span class="sc">::</span><span class="fu">write_spice</span>(metadata_dir)</span></code></pre></div>
</div>
<p>This function takes all the information collected in the csv files and compiles it into a json-ld, whose structure is compliant with schema.org dataset metadata standard.</p>
<p><strong>Publishing this file on the web means it will be indexed by Google Datasets search!</strong>  </p>
<h4 id="making-use-of-the-metadata-in-dataspice.json">Making use of the metadata in <code>dataspice.json</code></h4>
<p>Generating the <code>dataspice.json</code> file means we now have all our metadata in a standardised, interoperable, machine readable format allowing to build further automation from it.</p>
<h5 id="reading-into-r">Reading into R</h5>
<p>We can for example, load it into R and review it:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>dataspice_lst <span class="ot">&lt;-</span> jsonlite<span class="sc">::</span><span class="fu">read_json</span>(<span class="fu">file.path</span>(metadata_dir, <span class="st">&quot;dataspice.json&quot;</span>))</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>listviewer<span class="sc">::</span><span class="fu">jsonedit</span>(dataspice_lst)</span></code></pre></div>
<div id="htmlwidget-aa61c2bd3c3ea35bcefe" style="width:624px;height:384px;" class="jsonedit html-widget"></div>
<script type="application/json" data-for="htmlwidget-aa61c2bd3c3ea35bcefe">{"x":{"data":{"@context":"http://schema.org","type":"Dataset","name":"Benthic occurrences, habitat maps, and species traits","creator":[{"type":"Person","id":"0000-0003-3183-8116","email":"t.j.webb@sheffield.ac.uk","affiliation":"University of Sheffield","name":"Tom J. Webb"}],"description":"This data product links occurrences of benthic invertebrates from the EMODnet benthic numerical abundance product to two complementary seabed habitat products: the EMODnet broadscale habitat map 2019 (Vasquez et al., 2020), and Wilson et al.'s (2018) synthetic map of the north-west European Shelf sedimentary environment. We also process and incorporate qualitative information on the habitat and sediment preferences of species from the Biological Traits Information Catalogue BIOTIC database.","datePublished":"2021-04-07","keywords":["Marine/Coastal","Benthos","Habitat (Ecology)","Marine","Ocean floor"],"funder":"European Marine Observation and Data Network- Biology III","temporalCoverage":"1980-03-17/2018-07-04","license":"CC-BY 4.0","spatialCoverage":{"type":"Place","name":"European Seas","geo":{"type":"GeoShape","box":"73.63362 -9.39937 43.34082 35.22617"}},"variableMeasured":[{"type":"PropertyValue","unitText":[],"name":"total_events","description":"total events"},{"type":"PropertyValue","unitText":[],"name":"GravelD50","description":"GravelD50"},{"type":"PropertyValue","unitText":[],"name":"GravelPercent","description":"GravelPercent"},{"type":"PropertyValue","unitText":[],"name":"log_D50","description":"log D50"},{"type":"PropertyValue","unitText":[],"name":"MudPercent","description":"MudPercent"},{"type":"PropertyValue","unitText":[],"name":"Rock10cm","description":"Rock10cm"},{"type":"PropertyValue","unitText":[],"name":"Rock50cm","description":"Rock50cm"},{"type":"PropertyValue","unitText":[],"name":"SandD50","description":"SandD50"},{"type":"PropertyValue","unitText":[],"name":"SandPercent","description":"SandPercent"},{"type":"PropertyValue","unitText":[],"name":"TotalD50","description":"TotalD50"},{"type":"PropertyValue","unitText":[],"name":"Energy_High energy","description":"Energy High energy"},{"type":"PropertyValue","unitText":[],"name":"Energy_Low energy","description":"Energy Low energy"},{"type":"PropertyValue","unitText":[],"name":"Energy_Moderate energy","description":"Energy Moderate energy"},{"type":"PropertyValue","unitText":[],"name":"Energy_No energy information","description":"Energy No energy information"},{"type":"PropertyValue","unitText":[],"name":"Energy_NA","description":"Energy NA"},{"type":"PropertyValue","unitText":[],"name":"Biozone_Arctic lower bathyal","description":"Biozone Arctic lower bathyal"},{"type":"PropertyValue","unitText":[],"name":"Biozone_Arctic mid bathyal","description":"Biozone Arctic mid bathyal"},{"type":"PropertyValue","unitText":[],"name":"Biozone_Arctic upper abyssal","description":"Biozone Arctic upper abyssal"},{"type":"PropertyValue","unitText":[],"name":"Biozone_Atlantic upper bathyal","description":"Biozone Atlantic upper bathyal"},{"type":"PropertyValue","unitText":[],"name":"Biozone_Atlanto-Arctic upper bathyal","description":"Biozone Atlanto-Arctic upper bathyal"},{"type":"PropertyValue","unitText":[],"name":"Biozone_Deep circalittoral","description":"Biozone Deep circalittoral"},{"type":"PropertyValue","unitText":[],"name":"Biozone_Infralittoral","description":"Biozone Infralittoral"},{"type":"PropertyValue","unitText":[],"name":"Biozone_Shallow circalittoral","description":"Biozone Shallow circalittoral"},{"type":"PropertyValue","unitText":[],"name":"Biozone_NA","description":"Biozone NA"},{"type":"PropertyValue","unitText":[],"name":"Substrate_Coarse substrate","description":"Substrate Coarse substrate"},{"type":"PropertyValue","unitText":[],"name":"Substrate_Fine mud","description":"Substrate Fine mud"},{"type":"PropertyValue","unitText":[],"name":"Substrate_Fine mud or Sandy mud or Muddy sand","description":"Substrate Fine mud or Sandy mud or Muddy sand"},{"type":"PropertyValue","unitText":[],"name":"Substrate_Mixed sediment","description":"Substrate Mixed sediment"},{"type":"PropertyValue","unitText":[],"name":"Substrate_Muddy sand","description":"Substrate Muddy sand"},{"type":"PropertyValue","unitText":[],"name":"Substrate_Rock or other hard substrata","description":"Substrate Rock or other hard substrata"},{"type":"PropertyValue","unitText":[],"name":"Substrate_Sand","description":"Substrate Sand"},{"type":"PropertyValue","unitText":[],"name":"Substrate_Sandy mud","description":"Substrate Sandy mud"},{"type":"PropertyValue","unitText":[],"name":"Substrate_Sandy mud or Muddy sand","description":"Substrate Sandy mud or Muddy sand"},{"type":"PropertyValue","unitText":[],"name":"Substrate_Seabed","description":"Substrate Seabed"},{"type":"PropertyValue","unitText":[],"name":"Substrate_Sediment","description":"Substrate Sediment"},{"type":"PropertyValue","unitText":[],"name":"Substrate_NA","description":"Substrate NA"},{"type":"PropertyValue","unitText":[],"name":"Salinity_Euhaline","description":"Salinity Euhaline"},{"type":"PropertyValue","unitText":[],"name":"Salinity_Mesohaline","description":"Salinity Mesohaline"},{"type":"PropertyValue","unitText":[],"name":"Salinity_Oligohaline","description":"Salinity Oligohaline"},{"type":"PropertyValue","unitText":[],"name":"Salinity_Polyhaline","description":"Salinity Polyhaline"},{"type":"PropertyValue","unitText":[],"name":"Salinity_NA","description":"Salinity NA"},{"type":"PropertyValue","unitText":[],"name":"Oxygen_NA","description":"Oxygen NA"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A3.1","description":"EUNIScomb A3.1"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A3.2","description":"EUNIScomb A3.2"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A3.3","description":"EUNIScomb A3.3"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A3.4","description":"EUNIScomb A3.4"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A3.5","description":"EUNIScomb A3.5"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A3.6","description":"EUNIScomb A3.6"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A4","description":"EUNIScomb A4"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A4.1","description":"EUNIScomb A4.1"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A4.2","description":"EUNIScomb A4.2"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A4.27","description":"EUNIScomb A4.27"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A4.3","description":"EUNIScomb A4.3"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A4.33","description":"EUNIScomb A4.33"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A4.4","description":"EUNIScomb A4.4"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A4.5","description":"EUNIScomb A4.5"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A4.6","description":"EUNIScomb A4.6"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5","description":"EUNIScomb A5"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.13","description":"EUNIScomb A5.13"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.14","description":"EUNIScomb A5.14"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.15","description":"EUNIScomb A5.15"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.23","description":"EUNIScomb A5.23"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.23 or A5.24","description":"EUNIScomb A5.23 or A5.24"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.24","description":"EUNIScomb A5.24"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.24 or A5.33 or A5.34","description":"EUNIScomb A5.24 or A5.33 or A5.34"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.25","description":"EUNIScomb A5.25"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.25 or A5.26","description":"EUNIScomb A5.25 or A5.26"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.26","description":"EUNIScomb A5.26"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.26 or A5.35 or A5.36","description":"EUNIScomb A5.26 or A5.35 or A5.36"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.27","description":"EUNIScomb A5.27"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.27 or A5.37","description":"EUNIScomb A5.27 or A5.37"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.33","description":"EUNIScomb A5.33"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.34","description":"EUNIScomb A5.34"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.35","description":"EUNIScomb A5.35"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.36","description":"EUNIScomb A5.36"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.37","description":"EUNIScomb A5.37"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.43","description":"EUNIScomb A5.43"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.44","description":"EUNIScomb A5.44"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A5.45","description":"EUNIScomb A5.45"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A6","description":"EUNIScomb A6"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A6.11","description":"EUNIScomb A6.11"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A6.2","description":"EUNIScomb A6.2"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A6.3 or A6.4","description":"EUNIScomb A6.3 or A6.4"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_A6.5","description":"EUNIScomb A6.5"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_Na","description":"EUNIScomb Na"},{"type":"PropertyValue","unitText":[],"name":"EUNIScomb_NA","description":"EUNIScomb NA"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Abyssal","description":"MSFD BBHT Abyssal"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Circalittoral coarse sediment","description":"MSFD BBHT Circalittoral coarse sediment"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Circalittoral mixed sediment","description":"MSFD BBHT Circalittoral mixed sediment"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Circalittoral mud","description":"MSFD BBHT Circalittoral mud"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Circalittoral mud or Circalittoral sand","description":"MSFD BBHT Circalittoral mud or Circalittoral sand"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Circalittoral rock and biogenic reef","description":"MSFD BBHT Circalittoral rock and biogenic reef"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Circalittoral sand","description":"MSFD BBHT Circalittoral sand"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Infralittoral coarse sediment","description":"MSFD BBHT Infralittoral coarse sediment"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Infralittoral mixed sediment","description":"MSFD BBHT Infralittoral mixed sediment"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Infralittoral mud","description":"MSFD BBHT Infralittoral mud"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Infralittoral mud or Infralittoral sand","description":"MSFD BBHT Infralittoral mud or Infralittoral sand"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Infralittoral rock and biogenic reef","description":"MSFD BBHT Infralittoral rock and biogenic reef"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Infralittoral sand","description":"MSFD BBHT Infralittoral sand"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Lower bathyal sediment","description":"MSFD BBHT Lower bathyal sediment"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Na","description":"MSFD BBHT Na"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Offshore circalittoral coarse sediment","description":"MSFD BBHT Offshore circalittoral coarse sediment"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Offshore circalittoral mixed sediment","description":"MSFD BBHT Offshore circalittoral mixed sediment"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Offshore circalittoral mud","description":"MSFD BBHT Offshore circalittoral mud"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Offshore circalittoral mud or Offshore circalittoral sand","description":"MSFD BBHT Offshore circalittoral mud or Offshore circalittoral sand"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Offshore circalittoral rock and biogenic reef","description":"MSFD BBHT Offshore circalittoral rock and biogenic reef"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Offshore circalittoral sand","description":"MSFD BBHT Offshore circalittoral sand"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Upper bathyal rock and biogenic reef","description":"MSFD BBHT Upper bathyal rock and biogenic reef"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_Upper bathyal sediment","description":"MSFD BBHT Upper bathyal sediment"},{"type":"PropertyValue","unitText":[],"name":"MSFD_BBHT_NA","description":"MSFD BBHT NA"},{"type":"PropertyValue","unitText":[],"name":"AphiaID","description":"AphiaID"},{"type":"PropertyValue","unitText":[],"name":"total_occ","description":"total occ"},{"type":"PropertyValue","unitText":[],"name":"total_ab","description":"total ab"},{"type":"PropertyValue","unitText":[],"name":"mean_ab","description":"mean ab"},{"type":"PropertyValue","unitText":[],"name":"inf_epi","description":"inf epi"},{"type":"PropertyValue","unitText":[],"name":"plank_larv","description":"plank larv"},{"type":"PropertyValue","unitText":[],"name":"Bedrock","description":"Bedrock"},{"type":"PropertyValue","unitText":[],"name":"Cobbles","description":"Cobbles"},{"type":"PropertyValue","unitText":[],"name":"Large_VLarge_Boulders","description":"Large VLarge Boulders"},{"type":"PropertyValue","unitText":[],"name":"Small_Boulders","description":"Small Boulders"},{"type":"PropertyValue","unitText":[],"name":"Mud","description":"Mud"},{"type":"PropertyValue","unitText":[],"name":"Muddy_gravel","description":"Muddy gravel"},{"type":"PropertyValue","unitText":[],"name":"Muddy_sand","description":"Muddy sand"},{"type":"PropertyValue","unitText":[],"name":"Sandy_mud","description":"Sandy mud"},{"type":"PropertyValue","unitText":[],"name":"Coarse_sand","description":"Coarse sand"},{"type":"PropertyValue","unitText":[],"name":"Fine_sand","description":"Fine sand"},{"type":"PropertyValue","unitText":[],"name":"Other_species","description":"Other species"},{"type":"PropertyValue","unitText":[],"name":"Pebbles","description":"Pebbles"},{"type":"PropertyValue","unitText":[],"name":"Artificial","description":"Artificial"},{"type":"PropertyValue","unitText":[],"name":"Caves","description":"Caves"},{"type":"PropertyValue","unitText":[],"name":"Overhangs","description":"Overhangs"},{"type":"PropertyValue","unitText":[],"name":"Gravel_shingle","description":"Gravel shingle"},{"type":"PropertyValue","unitText":[],"name":"Algae","description":"Algae"},{"type":"PropertyValue","unitText":[],"name":"Mixed","description":"Mixed"},{"type":"PropertyValue","unitText":[],"name":"Salt_marsh","description":"Salt marsh"},{"type":"PropertyValue","unitText":[],"name":"Seagrass","description":"Seagrass"},{"type":"PropertyValue","unitText":[],"name":"Biogenic_reef","description":"Biogenic reef"},{"type":"PropertyValue","unitText":[],"name":"Under_boulders","description":"Under boulders"},{"type":"PropertyValue","unitText":[],"name":"Crevices","description":"Crevices"},{"type":"PropertyValue","unitText":[],"name":"Rockpools","description":"Rockpools"},{"type":"PropertyValue","unitText":[],"name":"Pelagic","description":"Pelagic"},{"type":"PropertyValue","unitText":[],"name":"Mud_grav_sand","description":"Mud grav sand"},{"type":"PropertyValue","unitText":[],"name":"Sand_grav_mud","description":"Sand grav mud"},{"type":"PropertyValue","unitText":[],"name":"Maerl","description":"Maerl"},{"type":"PropertyValue","unitText":[],"name":"Clay","description":"Clay"},{"type":"PropertyValue","unitText":[],"name":"Gravel_sand","description":"Gravel sand"},{"type":"PropertyValue","unitText":[],"name":"Mud_sand_gravel","description":"Mud sand gravel"},{"type":"PropertyValue","unitText":[],"name":"Strandline","description":"Strandline"}],"distribution":[{"type":"DataDownload","name":"benthic_sampling_event_habitat_summaries","contentUrl":"https://www.emodnet-biology.eu/data-catalog?module=dataset&dasid=6620","encodingFormat":"csv"},{"type":"DataDownload","name":"benthic_specicies_habitat_summaries","contentUrl":"https://www.emodnet-biology.eu/data-catalog?module=dataset&dasid=6620","encodingFormat":"csv"}]},"options":{"mode":"tree","modes":["code","form","text","tree","view"]}},"evals":[],"jsHooks":[]}</script>
</div>
<h5 id="presenting-metadata-in-rmarkdown">Presenting metadata in Rmarkdown</h5>
<p>We could also have a standard markdown snippet the extracts metadata from the <code>dataspice.json</code> file and include it in a README.Rmd.</p>
<p>For example, the following snippet in an Rmd document:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="do">### `r dataspice_lst$name`</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="do">##### Creator: `r dataspice_lst$creator[[1]]$name`</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="do">#### Data Product Description:</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">r dataspice_lst$description</span><span class="st">`</span></span></code></pre></div>
</div>
<p>would render to the following in the html/md version:</p>
<section id="benthic-occurrences-habitat-maps-and-species-traits" class="box-shadow">
<h3>Benthic occurrences, habitat maps, and species traits</h3>
<h5 id="creator-tom-j.-webb">Creator: Tom J. Webb</h5>
<h4 id="data-product-description">Data Product Description:</h4>
<p>This data product links occurrences of benthic invertebrates from the EMODnet benthic numerical abundance product to two complementary seabed habitat products: the EMODnet broadscale habitat map 2019 (Vasquez et al., 2020), and Wilson et al.s (2018) synthetic map of the north-west European Shelf sedimentary environment. We also process and incorporate qualitative information on the habitat and sediment preferences of species from the Biological Traits Information Catalogue BIOTIC database.</p>
</section>
<p><br></p>
<hr />
<h2 id="build-readme-site">Build README site</h2>
<p>Finally, we can <strong>use the <code>dataspice.json</code> file</strong> we just created to <strong>produce an informative README web page</strong> to include with our dataset for humans to enjoy! </p>
<p>We use function <strong><code>dataspice::build_site()</code></strong> which <strong>creates file <code>index.html</code></strong> in the <code>docs/</code> folder of your project (which it creates if it doesnt already exist).</p>
<div class="layout-chunk" data-layout="l-body">

</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>dataspice<span class="sc">::</span><span class="fu">build_site</span>(<span class="at">path =</span> <span class="fu">file.path</span>(metadata_dir, <span class="st">&quot;dataspice.json&quot;</span>))</span></code></pre></div>
</div>
<p><br></p>
<h3 id="enable-github-pages-to-serve-the-metadata-webpage">Enable GitHub Pages to serve the metadata webpage</h3>
<p>In the repository <strong>Settings</strong> page, select the <strong>Pages</strong> tab on left hand navigation panel.</p>
<p>To enable GitHub pages, select the branch (<code>master</code>) and folder (<code>docs/</code>) containing the content to be served:</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="images/gh-pages.png" width="100%" /></p>
</div>
<p>Its useful practice to add the url on the front matter of the repository:</p>
<div class="layout-chunk" data-layout="l-body">
<p><img src="images/repo.png" width="100%" /></p>
</div>
<h3 id="view-the-resulting-served-index.html-file-online">View the resulting served <code>index.html</code> file <a href="https://annakrystalli.me/EMODnet-Biology-Benthic-Habitats-Occurrences-Traits/">online</a></h3>
<p><br></p>
<p>Heres a screen shot!</p>
<div class="box-shadow">
<div class="layout-chunk" data-layout="l-body">
<iframe src="dataspice/index.html" width="100%" height="400px" data-external="1">
</iframe>
</div>
</div>
<h3 id="completed-metadata-files">Completed metadata files</h3>
<ul>
<li><a href="https://github.com/annakrystalli/EMODnet-Biology-Benthic-Habitats-Occurrences-Traits/blob/master/product/metadata/access.csv"><code>access.csv</code></a></li>
<li><a href="https://github.com/annakrystalli/EMODnet-Biology-Benthic-Habitats-Occurrences-Traits/blob/master/product/metadata/attributes.csv"><code>attributes.csv</code></a></li>
<li><a href="https://github.com/annakrystalli/EMODnet-Biology-Benthic-Habitats-Occurrences-Traits/blob/master/product/metadata/biblio.csv"><code>biblio.csv</code></a></li>
<li><a href="https://github.com/annakrystalli/EMODnet-Biology-Benthic-Habitats-Occurrences-Traits/blob/master/product/metadata/creators.csv"><code>creators.csv</code></a></li>
</ul>
<p>See the <a href="https://annakrystalli.me/EMODnet-Biology-Benthic-Habitats-Occurrences-Traits/"><strong>whole repository</strong></a></p>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
<h3 id="reuse">Reuse</h3>
<p>Text and figures are licensed under Creative Commons Attribution <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>. The figures that have been reused from other sources don't fall under this license and can be recognized by a note in their caption: "Figure from ...".</p>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
